name: "Pirate Basic Movement Test"
scenario: "pirate.json"

seed_game_state:
  model_name: "claude-3-5-sonnet-20241022"
  scenario: "pirate.json"
  scene_name: "shipwright"
  location: "Tortuga"
  turn_counter: 2
  scene_turn_counter: 2
  inventory: 
    - "cutlass"
    - "spyglass"
    - "lockpicks"
  vars:
    met_shipwright: "false"
  chat_history:
    - role: "user"
      content: "Look around at the docks."
    - role: "assistant"
      content: "Narrator: You stand on the bustling docks of Tortuga, the salty air thick with the promise of adventure. Pirates swagger about, their voices mixing with the sound of creaking wood and lapping waves. To the east, you can see The Black Pearl moored proudly at the dock. The Sleepy Mermaid tavern lies to the south, and the Tortuga Market bustles to the west. You notice your ship could use some repairs before setting sail again."
    - role: "user"  
      content: "I examine my ship more closely."
    - role: "assistant"
      content: "Narrator: Moving closer to The Black Pearl, you notice several planks are loose, the rigging needs attention, and there are signs of water damage from your last voyage. Gibbs, your loyal first mate, nods gravely at your assessment. 'Aye, Captain, she needs proper repairs before we can sail the high seas again,' he says. You'll need to find someone skilled in shipbuilding to help restore her to seaworthy condition."

steps:
  - name: "Move to Black Pearl"
    user_prompt: "I board The Black Pearl."
    expect:
      location: "Black Pearl" 
      response_contains: 
        - "black pearl"
        - "ship"
        - "deck"
      response_min_length: 50
      turn_increment: 1

  - name: "Look around ship deck"  
    user_prompt: "I look around the ship deck."
    expect:
      response_contains:
        - "repair"
        - "ledger"  
      inventory_added: []  # Should not pick up ledger just by looking
      turn_increment: 1

  - name: "Pick up ship repair ledger"
    user_prompt: "I review the ship repair ledger."
    expect:
      inventory_added: 
        - "ship repair ledger"
      response_contains:
        - "ledger"
      turn_increment: 1

  - name: "Go to Captain's Cabin"
    user_prompt: "I go through the cabin door."
    expect:
      location: "Captain's Cabin"
      response_contains:
        - "cabin"
        - "maps"
        - "treasure"
      turn_increment: 1

  - name: "Return to deck"
    user_prompt: "I go back through the cabin door."
    expect:
      location: "Black Pearl"
      response_contains:
        - "deck"
        - "ship"
      turn_increment: 1