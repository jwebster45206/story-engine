{
  "name": "Story Event Turn Counter Trigger Test",
  "description": "Tests that story events fire on exact turn counter match and only on that turn",
  "scenario": "dracula.json",
  "seed_game_state": {
    "scene_name": "arrival",
    "user_location": "grand_foyer",
    "turn_counter": 1,
    "scene_turn_counter": 1,
    "user_inventory": [
      "wooden stakes",
      "silver cross",
      "holy water"
    ],
    "vars": {
      "opened_grimoire": "false",
      "dracula_appeared": "false"
    },
    "chat_history": [
      {
        "role": "user",
        "content": "I walk through the gates and enter the castle."
      },
      {
        "role": "assistant",
        "content": "The heavy iron gates creak open as you push through them, and you step into the Grand Foyer. The oppressive atmosphere immediately envelops you."
      },
      {
        "role": "user",
        "content": "I look around the foyer carefully."
      },
      {
        "role": "assistant",
        "content": "You examine the grand foyer. Dusty portraits line the walls, an enormous chandelier hangs overhead, and doorways lead in multiple directions. The smell of decay fills the air."
      }
    ]
  },
  "steps": [
    {
      "name": "No lightning yet",
      "user_prompt": "I examine the portraits on the walls.",
      "expect": {
        "scene_name": "arrival",
        "user_location": "grand_foyer",
        "scene_turn_counter": 2
      }
    },
    {
      "name": "Lightning event",
      "user_prompt": "WAIT_FOR_STORY_EVENT",
      "expect": {
        "story_event_contains": ["lightning"],
        "user_location": "grand_foyer",
        "response_contains": ["lightning"]
      }
    }
  ]
}
