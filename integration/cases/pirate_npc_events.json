{
  "name": "Pirate NPC Events Test",
  "scenario": "pirate.json",
  "seed_game_state": {
    "scenario": "pirate.json",
    "scene": "british_docks",
    "location": "sleepy_mermaid",
    "vars": {
      "ship_repair_ledger_acquired": "true",
      "shipwright_hired": "true",
      "davey_recruited": "false"
    },
    "chat_history": [
      {
        "role": "assistant",
        "content": "Calypso smiles warmly as you finish paying the shipwright. 'Well done, Captain! Your ship will be seaworthy soon. But if you're planning anything dangerous, you might want to seek out old Davey in Tortuga. He's a skilled pirate who knows his way around the British docks.'"
      }
    ]
  },
  "steps": [
    {
      "name": "look for davey",
      "user_prompt": "I head to Tortuga Market to look for Davey.",
      "expect": {
        "location": "tortuga_market",
        "npc_locations": {
          "davey": "tortuga_market"
        }
      }
    },
    {
      "name": "recruit davey - following should activate via conditional",
      "user_prompt": "I approach Davey and say, 'Davey, old friend! I need your help. Will you follow me?'",
      "expect": {
        "location": "tortuga_market",
        "npc_locations": {
          "davey": "tortuga_market"
        }
      },
        "vars": {
          "davey_recruited": "true"
        }
    },
    {
      "name": "move to tortuga",
      "user_prompt": "I return to Tortuga.",
      "expect": {
        "location": "tortuga",
        "npc_locations": {
          "davey": "tortuga"
        },
        "vars": {
          "davey_recruited": "true"
        }
      }
    },
    {
      "name": "move to black pearl",
      "user_prompt": "I board the Black Pearl.",
      "expect": {
        "location": "black_pearl",
        "npc_locations": {
          "davey": "black_pearl"
        },
        "vars": {
          "davey_recruited": "true"
        }
      }
    }
  ]
}
