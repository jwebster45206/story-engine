{
  "name": "Pirate Captain - Refactored",
  "story": "You are the captain of The Black Pearl, a legendary pirate ship. Your crew has just docked at Tortuga, a notorious pirate haven. Adventure and treasure await as you explore the Caribbean during the Golden Age of Piracy.",
  "rating": "PG13",
  "scenes": {
    "shipwright": {
      "story": "Your ship needs repairs before you can set sail again. You must find the shipwright and hire him to fix The Black Pearl. You'll also encounter the mysterious Calypso at the Sleepy Mermaid.",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "west": "Tortuga Market"
          }
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, ready for the next voyage.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin"
          },
          "blocked_exits": {
            "open sea": "The Black Pearl is not seaworthy until it is repaired."
          },
          "items": [
            "ship repair ledger",
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright who will repair your ship. He requires a ship repair ledger to begin the work, and a payment of 500 gold doubloons to complete the repairs.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": []
        },
        "Charming Marvin": {
          "name": "Charming Marvin",
          "type": "merchant",
          "disposition": "shrewd and cunning",
          "description": "A merchant who deals in common items necessary for life at sea. Unpleasant smell and unpleasant demeanor, but has what you need.",
          "important": false,
          "location": "Tortuga Market",
          "items": [
            "forged documents",
            "rare spices",
            "bottle of rum",
            "black powder",
            "flintlock pistol"
          ]
        }
      },
      "vars": {
        "black_pearl_repairs_started": "false",
        "calypso_met": "false"
      },
      "contingency_prompts": [
        "When the player first enters the Sleepy Mermaid, Calypso greets him.",
        "Calypso never leaves the Sleepy Mermaid, so the player must find her there.",
        "The shipwright can begin work for a small deposit, but requires payment of 500 gold doubloons to complete the repairs."
      ],
      "contingency_rules": [
        "Only when the player meets Calypso, set the var `calypso_met` to `true`.",
        "Only when the player asks the shipwright to start repairs on the Black Pearl, set `black_pearl_repairs_started` to true and remove the ship repair ledger from inventory.",
        "Scene advances to 'british_docks' when `black_pearl_repairs_started` is true and `calypso_met` is true."
      ],
      "opening_prompt": "You stand on the bustling docks of Tortuga, the salty air thick with the promise of adventure. Your ship, The Black Pearl, needs repairs before you can set sail. What will you do next?",
      "opening_location": "Tortuga",
      "opening_inventory": [
        "cutlass",
        "spyglass",
        "lockpicks"
      ]
    },
    "british_docks": {
      "story": "You need gold to pay the shipwright. The British Docks hold a chest of gold doubloons, but it's heavily guarded territory. You'll need to use cunning and disguise to steal the treasure.",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "north": "British Docks",
            "west": "Tortuga Market"
          }
        },
        "British Docks": {
          "name": "British Docks",
          "description": "A heavily guarded area where British ships are docked.",
          "exits": {
            "south": "Tortuga"
          },
          "items": [
            "wanted poster with a handsome scoundrel's face",
            "chest of 510 gold doubloons",
            "british naval uniform"
          ]
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, repairs in progress.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin"
          },
          "blocked_exits": {
            "open sea": "The Black Pearl is still being repaired."
          },
          "items": [
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright working on your ship repairs. He still needs payment of 500 gold doubloons to complete the work.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Davey": {
          "name": "Davey",
          "type": "pirate",
          "disposition": "friendly",
          "description": "A grizzled old pirate with a wooden leg. Fellow captain and sometimes ally.",
          "important": false,
          "location": "Tortuga Market",
          "items": []
        },
        "Charming Marvin": {
          "name": "Charming Marvin",
          "type": "merchant",
          "disposition": "shrewd and cunning",
          "description": "A merchant who deals in common items necessary for life at sea. Unpleasant smell and unpleasant demeanor, but has what you need.",
          "important": false,
          "location": "Tortuga Market",
          "items": [
            "forged documents",
            "rare spices",
            "british naval uniform",
            "bottle of rum",
            "black powder",
            "flintlock pistol"
          ]
        }
      },
      "vars": {
        "british_docks_accessed": "false",
        "gold_stolen": "false"
      },
      "contingency_prompts": [
        "Allow the player to access the British Docks through creative in-world solutions only.",
        "The chest on the British Docks is too heavy for one person to carry.",
        "British naval uniforms and forged documents might be useful for infiltrating the British Docks."
      ],
      "contingency_rules": [
        "Only when the player successfully accesses the gold doubloons, add 510 gold doubloons to inventory. Do not add the chest. Set `gold_stolen` to true.",
        "Only when the player accesses British Docks, set var `british_docks_accessed` to `true`.",
        "Scene advances to 'calypsos_map' when `gold_stolen` is true."
      ],
      "opening_prompt": "The shipwright has started work on The Black Pearl, but you need 500 gold doubloons to pay him. You've heard rumors of a chest of gold at the British Docks, but it's heavily guarded. How will you get the gold?",
      "opening_location": "Tortuga",
      "opening_inventory": [
        "cutlass",
        "spyglass",
        "lockpicks"
      ]
    },
    "calypsos_map": {
      "story": "With gold in hand, you can pay the shipwright. But Calypso has something special for you - a treasure map that will lead to even greater riches. Complete your business and claim the map.",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "west": "Tortuga Market"
          }
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, nearly ready to sail.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin",
            "open sea": "The open sea. It calls to a pirate's heart."
          },
          "items": [
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature. She has a special treasure map for you.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "treasure map",
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright working on your ship repairs. He's ready to complete the work once you pay him 500 gold doubloons.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        }
      },
      "vars": {
        "blacksmith_paid": "false",
        "map_obtained": "false"
      },
      "contingency_prompts": [
        "Calypso will only give the treasure map to someone she trusts - someone who has proven themselves worthy.",
        "The shipwright must be paid before the ship repairs are complete."
      ],
      "contingency_rules": [
        "Only when the player pays the shipwright 500 gold doubloons, set `blacksmith_paid` to true and remove the 500 gold doubloons from inventory.",
        "Only when the player receives the treasure map from Calypso, set `map_obtained` to true and add 'treasure map' to inventory.",
        "The game ends successfully when both `blacksmith_paid` is true and `map_obtained` is true."
      ],
      "opening_prompt": "You return to Tortuga with a chest full of gold doubloons. The shipwright awaits payment, and Calypso has hinted she has something special for a worthy pirate captain. Time to complete your business and claim your rewards.",
      "opening_location": "Tortuga",
      "opening_inventory": [
        "cutlass",
        "spyglass",
        "lockpicks",
        "510 gold doubloons"
      ]
    }
  },
  "opening_scene": "shipwright"
}
