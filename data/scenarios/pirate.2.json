{
  "name": "Pirate Captain - Refactored",
  "story": "You are the captain of The Black Pearl, a legendary pirate ship. Your crew has just docked at Tortuga, a notorious pirate haven. Adventure and treasure await as you explore the Caribbean during the Golden Age of Piracy.",
  "rating": "PG13",
  "scenes": {
    "shipwright": {
      "story": "Your ship needs repairs before you can set sail again. You must find the shipwright and hire him to fix The Black Pearl. ",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "west": "Tortuga Market"
          }
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, ready for the next voyage.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin"
          },
          "blocked_exits": {
            "open sea": "The Black Pearl is not seaworthy until it is repaired."
          },
          "items": [
            "ship repair ledger",
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright who will repair your ship. He requires a ship repair ledger to begin the work, and a payment of 500 gold doubloons to complete the repairs.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": []
        },
        "Charming Marvin": {
          "name": "Charming Marvin",
          "type": "merchant",
          "disposition": "shrewd and cunning",
          "description": "A merchant who deals in common items necessary for life at sea. Unpleasant smell and unpleasant demeanor, but has what you need.",
          "important": false,
          "location": "Tortuga Market",
          "items": [
            "forged documents",
            "rare spices",
            "bottle of rum",
            "black powder",
            "flintlock pistol"
          ]
        }
      },
      "vars": {
        "black_pearl_repairs_started": "false",
        "calypso_met": "false"
      },
      "contingency_prompts": [
        "When the player first enters the Sleepy Mermaid, Calypso greets him.",
        "Calypso never leaves the Sleepy Mermaid, so the player must find her there.",
        "The shipwright can BEGIN work for a small deposit. To FINISH the repairs, he requires payment of 500 gold doubloons."
      ],
      "contingency_rules": [
        "Only when the player meets Calypso, set the var `calypso_met` to `true`.",
        "Only when the player asks the shipwright to start repairs on the Black Pearl, set `black_pearl_repairs_started` to true and remove the ship repair ledger from inventory.",
        "Scene advances to 'british_docks' when `black_pearl_repairs_started` is true and `calypso_met` is true.",
        "Use Calypso to drop hints about the British Docks and gold."
      ]
    },
    "british_docks": {
      "story": "You need gold to pay the shipwright. The British Docks hold a chest of gold doubloons, but it's heavily guarded territory. You'll need to use cunning and disguise to steal the treasure.",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "north": "British Docks",
            "west": "Tortuga Market"
          }
        },
        "British Docks": {
          "name": "British Docks",
          "description": "A heavily guarded area where British ships are docked.",
          "exits": {
            "south": "Tortuga"
          },
          "items": [
            "wanted poster with a handsome scoundrel's face",
            "chest of 510 gold doubloons",
            "british naval uniform"
          ]
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, repairs in progress.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin"
          },
          "blocked_exits": {
            "open sea": "The Black Pearl is still being repaired."
          },
          "items": [
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright working on your ship repairs. He still needs payment of 500 gold doubloons to complete the work.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Davey": {
          "name": "Davey",
          "type": "pirate",
          "disposition": "friendly",
          "description": "A grizzled old pirate with a wooden leg. Fellow captain and sometimes ally.",
          "important": false,
          "location": "Tortuga Market",
          "items": []
        },
        "Charming Marvin": {
          "name": "Charming Marvin",
          "type": "merchant",
          "disposition": "shrewd and cunning",
          "description": "A merchant who deals in common items necessary for life at sea. Unpleasant smell and unpleasant demeanor, but has what you need.",
          "important": false,
          "location": "Tortuga Market",
          "items": [
            "forged documents",
            "rare spices",
            "british naval uniform",
            "bottle of rum",
            "black powder",
            "flintlock pistol"
          ]
        }
      },
      "vars": {
        "british_docks_accessed": "false",
        "gold_stolen": "false",
        "shipright_paid": "false"
      },
      "contingency_prompts": [
        "Allow the player to access the British Docks through creative in-world solutions, but not brute force.",
        "The chest on the British Docks is too heavy for one person to carry.",
        "British naval uniforms and forged documents might be useful for infiltrating the British Docks."
      ],
      "contingency_rules": [
        "Only when the player accesses the British Docks, set `british_docks_accessed` to true.",
        "Only when the player steals the chest of gold doubloons, set `gold_stolen` to true and add '510 gold doubloons' to inventory.",
        "When the player has returned to the Black Pearl and paid the shipwright, remove 500 gold doubloons from inventory, leaving 10 gold doubloons, and set shipright_paid to true.",
        "When shipwright_paid is true, the scene advances to 'calypsos_map'."
      ]
    },
     "calypsos_map": {
      "story": "With gold in hand, you can pay the shipwright. But Calypso has something special for you - a treasure map that will lead to even greater riches. Complete your business and claim the map.",
      "locations": {
        "Tortuga": {
          "name": "Tortuga",
          "description": "A bustling pirate port filled with taverns, traders, and trouble.",
          "exits": {
            "east": "Black Pearl",
            "south": "Sleepy Mermaid",
            "west": "Tortuga Market"
          }
        },
        "Black Pearl": {
          "name": "Black Pearl",
          "description": "Your ship, moored at the docks, nearly ready to sail.",
          "exits": {
            "west": "Tortuga",
            "cabin door": "Captain's Cabin",
            "open sea": "The open sea. It calls to a pirate's heart."
          },
          "items": [
            "prickles the parrot"
          ]
        },
        "Captain's Cabin": {
          "name": "Captain's Cabin",
          "description": "Your personal quarters on the ship, filled with maps and treasures.",
          "exits": {
            "cabin door": "Black Pearl"
          },
          "items": [
            "bag of pieces of eight"
          ]
        },
        "Sleepy Mermaid": {
          "name": "Sleepy Mermaid",
          "description": "A rowdy inn filled with pirates and rumors of treasure.",
          "exits": {
            "north": "Tortuga",
            "back door": "Tortuga Market"
          }
        },
        "Tortuga Market": {
          "name": "Tortuga Market",
          "description": "A bustling market filled with merchants, pirates, and rare goods. The air is thick with the scent of spices and the sound of haggling.",
          "exits": {
            "main street": "Tortuga",
            "Sleepy Mermaid back door": "Sleepy Mermaid"
          },
          "items": [
            "forged documents",
            "rare spices"
          ]
        }
      },
      "npcs": {
        "Gibbs": {
          "name": "Gibbs",
          "type": "pirate",
          "disposition": "loyal",
          "description": "Your loyal first mate with a keen sense of duty.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        },
        "Calypso": {
          "name": "Calypso",
          "type": "bartender",
          "disposition": "teasing and tricky",
          "description": "A bartender at the Sleepy Mermaid, known for her enchanting stories and elusive nature. She has a special treasure map for you.",
          "important": true,
          "location": "Sleepy Mermaid",
          "items": [
            "treasure map",
            "Bottle of rum"
          ]
        },
        "Shipwright": {
          "name": "Shipwright",
          "type": "shipwright",
          "disposition": "gruff but helpful",
          "description": "A burly shipwright working on your ship repairs. He's ready to complete the work once you pay him 500 gold doubloons.",
          "important": true,
          "location": "Black Pearl",
          "items": []
        }
      },
      "vars": {
        "blacksmith_paid": "false",
        "map_obtained": "false"
      },
      "contingency_prompts": [
        "Calypso will only give the treasure map to someone she trusts - someone who has proven themselves worthy."
      ],
      "contingency_rules": [
        "Only when the player receives the treasure map from Calypso, set `map_obtained` to true and add 'treasure map' to inventory.",
        "When the player returns to the Black Pearl, with `map_obtained` true, the game ends successfully."
      ]
    }
  },
  "opening_scene": "shipwright",
  "opening_prompt": "You stand on the bustling docks of Tortuga, the salty air thick with the promise of adventure. Your ship, The Black Pearl, needs repairs before you can set sail. What will you do next?",
  "opening_location": "Tortuga",
  "opening_inventory": [
    "cutlass",
    "spyglass",
    "lockpicks"
  ],
  "contingency_prompts": [
    "Use some humor and piratical voicing in responses."
  ],
  "contingency_rules": [
    "Never let Gibbs leave the player's side. He is always ready to assist and will follow the player wherever they go."
  ]
}
